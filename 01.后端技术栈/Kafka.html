<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>windows启动 | 笔记整理</title>
    <meta name="description" content="日常笔记整理">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/wiki/assets/style.CuvkYKrP.css" as="style">
    <link rel="preload stylesheet" href="/wiki/vp-icons.css" as="style">
    
    <script type="module" src="/wiki/assets/app.CrdO0i-S.js"></script>
    <link rel="preload" href="/wiki/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/wiki/assets/chunks/theme.B47kHrva.js">
    <link rel="modulepreload" href="/wiki/assets/chunks/framework.DNN_1AUP.js">
    <link rel="modulepreload" href="/wiki/assets/01.后端技术栈_Kafka.md.UuY9rLXq.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/wiki/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>笔记整理</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/Java.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>后端技术栈</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/markdown-examples.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Examples</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>后端技术栈</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/Java.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>JAVA</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/SpringBoot.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>SpringBoot</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/%E6%9E%B6%E6%9E%84300%E8%AE%B2.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>架构300讲</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/%E9%9D%A2%E8%AF%95%E9%A2%98.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>面试题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Examples</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/wiki/markdown-examples.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Markdown Examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/wiki/api-examples.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Runtime API Examples</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _wiki_01_%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88_Kafka" data-v-39a288b8><div><h3 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h3><p>Kafka是分布式<strong>事件流</strong>平台，用于<strong>高性能数据管道</strong>、流分析、数据集成和关键任务应用程序</p><h3 id="_3个关键功能" tabindex="-1">3个关键功能 <a class="header-anchor" href="#_3个关键功能" aria-label="Permalink to &quot;3个关键功能&quot;">​</a></h3><ol><li>发布（写入）、订阅（读取）事件流。</li><li>持久化。持久可靠的<strong>存储</strong>事件流</li><li>在事件发生或回顾性地<strong>处理</strong>事件流</li></ol><h3 id="使用案例" tabindex="-1">使用案例 <a class="header-anchor" href="#使用案例" aria-label="Permalink to &quot;使用案例&quot;">​</a></h3><ul><li>消息传递</li><li>网站活动跟踪</li><li>指标</li><li>日志聚合</li><li>流处理</li><li>事件溯源</li><li>提交日志</li></ul><h4 id="应用场景" tabindex="-1">应用场景 <a class="header-anchor" href="#应用场景" aria-label="Permalink to &quot;应用场景&quot;">​</a></h4><ul><li>缓存/削峰</li><li>异步通讯</li><li>解耦</li></ul><h4 id="消息队列模式" tabindex="-1">消息队列模式 <a class="header-anchor" href="#消息队列模式" aria-label="Permalink to &quot;消息队列模式&quot;">​</a></h4><ul><li>点对点</li><li>发布/订阅</li></ul><h4 id="分区的策略" tabindex="-1">分区的策略 <a class="header-anchor" href="#分区的策略" aria-label="Permalink to &quot;分区的策略&quot;">​</a></h4><ul><li>指定分区</li><li>设置key，通过key的hash值取余</li><li>既不指定分区，也不设置key。通过黏性分区器进行分区，尽量先一个分区，等batch.size满后，换另一分区</li><li>自定义分区器，实现 Partitioner 接口，并重写方法。 ProducerConfig.PARTITIONER_CLASS_CONFIG 参数指定全路径自定义类</li></ul><h4 id="kafka中key的作用" tabindex="-1">Kafka中key的作用 <a class="header-anchor" href="#kafka中key的作用" aria-label="Permalink to &quot;Kafka中key的作用&quot;">​</a></h4><ul><li>决定分区，根据key的hash值对partition的值取余，判断哪个分区</li><li>负载均衡和高伸缩性</li><li>副本选择，指定key可以帮助在多个副本中选择合适的Leader，确保数据的高可用性和容错性。</li></ul><h4 id="压缩算法比对" tabindex="-1">压缩算法比对 <a class="header-anchor" href="#压缩算法比对" aria-label="Permalink to &quot;压缩算法比对&quot;">​</a></h4><p>但对于 Kafka 而言， 即在</p><ul><li><p>吞吐量方面：LZ4 &gt; Snappy &gt; zstd 和 GZIP；</p></li><li><p>压缩比方面，zstd &gt; LZ4 &gt; GZIP &gt; Snappy 。如果网络不好且 CPU 资源够的话,建议使用 zstd 压缩</p></li></ul><p>具体到物理资源，使用 Snappy 算法占用的网络带宽最多，zstd 最少，这是合理的，毕竟 zstd 就是要提供超高的压缩比；</p><p>在 CPU 使用率方面，各个算法表现得差不多，只是在压缩时 Snappy 算法使用的 CPU 较多一些，而在解压缩时 GZIP 算法则可能使用更多的 CPU</p><h3 id="生产经验" tabindex="-1">生产经验 <a class="header-anchor" href="#生产经验" aria-label="Permalink to &quot;生产经验&quot;">​</a></h3><h4 id="生产者如何提高吞吐量" tabindex="-1">生产者如何提高吞吐量 <a class="header-anchor" href="#生产者如何提高吞吐量" aria-label="Permalink to &quot;生产者如何提高吞吐量&quot;">​</a></h4><ul><li>batch.size：批次大小，默认16k</li><li>linger.ms：等待时间，修改为5-100ms</li><li>compression.type：压缩snappy</li><li>RecordAccumulator：缓冲区大小，修改为64m</li></ul><h4 id="数据可靠性" tabindex="-1">数据可靠性 <a class="header-anchor" href="#数据可靠性" aria-label="Permalink to &quot;数据可靠性&quot;">​</a></h4><ul><li><p>ack应答级别</p><ul><li>0；不需要等数据落盘应答</li><li>1；Leader收到数据后应答</li><li>-1/all；Leader和ISR队列里面的所有节点收齐数据后应答</li></ul></li></ul><p><strong>思考：Leader收到数据，所有Follower都开始同步数据， 但有一个Follower，因为某种故障，迟迟不能与Leader进行 同步，那这个问题怎么解决呢？</strong></p><p>Leader维护了一个动态的in-sync replica set（ISR），意为和 Leader保持同步的Follower+Leader集合(leader：0，isr:0,1,2)。 如果Follower长时间未向Leader发送通信请求或同步数据，则 该Follower将被踢出ISR。该时间阈值由replica.lag.time.max.ms参 数设定，默认30s。例如2超时，(leader:0, isr:0,1)。 这样就不用等长期联系不上或者已经故障的节点。</p><p><strong>数据完全可靠条件 = ACK级别设置为-1 + 分区副本大于等于2 + ISR里应答的最小副本数量大于等于2</strong></p><h4 id="数据去重" tabindex="-1">数据去重 <a class="header-anchor" href="#数据去重" aria-label="Permalink to &quot;数据去重&quot;">​</a></h4><ul><li><p>至少一次（At Least Once）= ACK级别设置为-1 + 分区副本大于等于2 + ISR里应答的最小副本数量大于等于2</p></li><li><p>最多一次（At Most Once）= ACK级别设置为0</p></li><li><p>总结：</p><ul><li><p>At Least Once可以保证数据不丢失，但是不能保证数据不重复；</p></li><li><p>At Most Once可以保证数据不重复，但是不能保证数据不丢失。</p></li><li><p>精确一次（Exactly Once）：对于一些非常重要的信息，比如和钱相关的数据，要求数据既不能重复也不丢失。 Kafka 0.11版本以后，引入了一项重大特性：幂等性和事务。</p></li></ul></li></ul><p><strong>精确一次（Exactly Once） = 幂等性 + 至少一次（ ack=-1 + 分区副本数&gt;=2 + ISR最小副本数量&gt;=2） 。</strong></p><h4 id="生产者事务" tabindex="-1">生产者事务 <a class="header-anchor" href="#生产者事务" aria-label="Permalink to &quot;生产者事务&quot;">​</a></h4><p>开启事务，必须开启幂等性。 开启参数 enable.idempotence 默认为 true，false 关闭。</p><p>Producer 在使用事务功能前，必须先 自定义一个唯一的 transactional.id。有 了 transactional.id，即使客户端挂掉了， 它重启后也能继续处理未完成的事务</p><h4 id="数据有序" tabindex="-1">数据有序 <a class="header-anchor" href="#数据有序" aria-label="Permalink to &quot;数据有序&quot;">​</a></h4><p>1）kafka在1.x版本之前保证数据单分区有序，条件如下：</p><ul><li>max.in.flight.requests.per.connection=1（不需要考虑是否开启幂等性）。</li></ul><p>2）kafka在1.x及以后版本保证数据单分区有序，条件如下：</p><p>（1）未开启幂等性 max.in.flight.requests.per.connection需要设置为1。</p><p>（2）开启幂等性 max.in.flight.requests.per.connection需要设置小于等于5。</p><p>原因说明：因为在kafka1.x以后，启用幂等后，kafka服务端会缓存producer发来的最近5个request的元数据， 故无论如何，都可以保证最近5个request的数据都是有序的。</p><p>如果开启了幂等性且缓存的 请求个数小于5个。会在服 务端重新排序</p><ul><li>retries 当消息发送出现错误的时候，系统会重发消息。retries 表示重试次数。默认是 int 最大值，2147483647。 如果设置了重试，还想保证消息的有序性，需要设置 MAX_IN_FLIGHT_REQUESTS_PER_CONNECTION=1 否则在重试此失败消息的时候，其他的消息可能发送 成功了。</li></ul><h4 id="数据积压-消费者如何提高吞吐量" tabindex="-1">数据积压（消费者如何提高吞吐量） <a class="header-anchor" href="#数据积压-消费者如何提高吞吐量" aria-label="Permalink to &quot;数据积压（消费者如何提高吞吐量）&quot;">​</a></h4><p>1）如果是Kafka消费能力不足，则可以考虑增 加Topic的分区数，并且同时提升消费组的消费者 数量，消费者数 = 分区数。（两者缺一不可）</p><p>2）如果是下游的数据处理不及时：提高每批次拉取的数 量。批次拉取数据过少（拉取数据/处理时间 &lt; 生产速度）， 使处理的数据小于生产的数据，也会造成数据积压。</p><h3 id="leader-和-follower-故障处理细节" tabindex="-1">Leader 和 Follower 故障处理细节 <a class="header-anchor" href="#leader-和-follower-故障处理细节" aria-label="Permalink to &quot;Leader 和 Follower 故障处理细节&quot;">​</a></h3><p>LEO（Log End Offset）：每个副本的最后一个offset，LEO其实就是最新的offset + 1。</p><p>HW（High Watermark）：所有副本中最小的LEO 。</p><h4 id="_1-follower故障" tabindex="-1">1）Follower故障 <a class="header-anchor" href="#_1-follower故障" aria-label="Permalink to &quot;1）Follower故障&quot;">​</a></h4><p>（1） Follower发生故障后会被临时踢出ISR</p><p>（2） 这个期间Leader和Follower继续接收数据</p><p>（3）待该Follower恢复后，Follower会读取本地磁盘记录的 上次的HW，并将log文件高于HW的部分截取掉，从HW开始 向Leader进行同步。</p><p>（4）等该Follower的LEO大于等于该Partition的HW，即 Follower追上Leader之后，就可以重新加入ISR了。</p><h4 id="_1-leader故障" tabindex="-1">1）Leader故障 <a class="header-anchor" href="#_1-leader故障" aria-label="Permalink to &quot;1）Leader故障&quot;">​</a></h4><p>（1） Leader发生故障之后，会从ISR中选出一个新的Leader</p><p>（2）为保证多个副本之间的数据一致性，其余的Follower会先将各自的log文件高于HW的部分截掉，然后从新的Leader同步数据。</p><p><strong>注意：这只能保证副本之间的数据一致性，并不能保 证数据不丢失或者不重复。</strong></p><h3 id="漏消费和重复消费" tabindex="-1">漏消费和重复消费 <a class="header-anchor" href="#漏消费和重复消费" aria-label="Permalink to &quot;漏消费和重复消费&quot;">​</a></h3><h4 id="场景1-重复消费。" tabindex="-1">场景1：重复消费。 <a class="header-anchor" href="#场景1-重复消费。" aria-label="Permalink to &quot;场景1：重复消费。&quot;">​</a></h4><p>自动提交offset引起</p><p>1） Consumer 每5s提交offset</p><p>2）如果提交offset后的2s，consumer挂了</p><p>3）再次重启consumer，则从上一次提交的 offset处继续消费，导致重复消费</p><h4 id="场景1-漏消费" tabindex="-1">场景1：漏消费 <a class="header-anchor" href="#场景1-漏消费" aria-label="Permalink to &quot;场景1：漏消费&quot;">​</a></h4><p>设置offset为手动提交，当offset被提交时，数据还在内存中未落盘，此时刚好消费者线 程被kill掉，那么offset已经提交，但是数据未处理，导致这部分内存中的数据丢失。</p><p><strong>思考：怎么能做到既不漏消费也不重复消费呢？详看消费者事务。</strong></p><p>如果想完成Consumer端的精准一次性消费，那么需要Kafka消费端将消费过程和提交offset 过程做原子绑定。此时我们需要将Kafka的offset保存到支持事务的自定义介质（比 如 MySQL）。</p><h3 id="kafka-eagle-监控" tabindex="-1">Kafka-Eagle 监控 <a class="header-anchor" href="#kafka-eagle-监控" aria-label="Permalink to &quot;Kafka-Eagle 监控&quot;">​</a></h3><h1 id="windows启动" tabindex="-1">windows启动 <a class="header-anchor" href="#windows启动" aria-label="Permalink to &quot;windows启动&quot;">​</a></h1><h6 id="启动zookpeer时出现-不是正确的命令" tabindex="-1">启动zookpeer时出现，不是正确的命令 <a class="header-anchor" href="#启动zookpeer时出现-不是正确的命令" aria-label="Permalink to &quot;启动zookpeer时出现，不是正确的命令&quot;">​</a></h6><p>因为层级太深，文件夹命名太长，改短即可。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/Java.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>JAVA</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"01.后端技术栈_java.md\":\"BYA3oC2s\",\"01.后端技术栈_kafka.md\":\"UuY9rLXq\",\"01.后端技术栈_lanmei-question.md\":\"Dzimh3QT\",\"01.后端技术栈_linux学习笔记.md\":\"C6nfssGN\",\"01.后端技术栈_netty.md\":\"COJZntj9\",\"01.后端技术栈_springboot.md\":\"LVVjmsBN\",\"01.后端技术栈_zookeeper.md\":\"oexH2QJb\",\"01.后端技术栈_公司技术栈.md\":\"T75YWD1k\",\"01.后端技术栈_单词.md\":\"VOfrAj8t\",\"01.后端技术栈_复习.md\":\"CLjUX7U5\",\"01.后端技术栈_学习目录.md\":\"dbq1NpP6\",\"01.后端技术栈_心路历程.md\":\"BFFOQvDN\",\"01.后端技术栈_架构300讲.md\":\"DZJelVnf\",\"01.后端技术栈_算法.md\":\"Dd8BfsI_\",\"01.后端技术栈_遇到的问题.md\":\"BgcAhm8K\",\"01.后端技术栈_面试.md\":\"BAiAYs3B\",\"01.后端技术栈_面试题.md\":\"BvcFAGp_\",\"02.前端技术栈_html.md\":\"DSgfiFiE\",\"02.前端技术栈_javascript.md\":\"DRkEv99b\",\"03.开发工具_idea快捷键.md\":\"D68Vc3ti\",\"03.开发工具_window.md\":\"GXPh8-dc\",\"03.开发工具_常用开发工具.md\":\"DLUfVXHA\",\"03.开发工具_常用开源项目.md\":\"DToDfYHr\",\"api-examples.md\":\"DRcpOulh\",\"index.md\":\"Baj4H64R\",\"markdown-examples.md\":\"vjmPFt3Y\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"笔记整理\",\"description\":\"日常笔记整理\",\"base\":\"/wiki/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"后端技术栈\",\"link\":\"/01.后端技术栈/Java.md\"},{\"text\":\"Examples\",\"link\":\"/markdown-examples\"}],\"sidebar\":[{\"text\":\"后端技术栈\",\"collapsed\":false,\"items\":[{\"text\":\"JAVA\",\"link\":\"/01.后端技术栈/Java.md\"},{\"text\":\"SpringBoot\",\"link\":\"/01.后端技术栈/SpringBoot.md\"},{\"text\":\"架构300讲\",\"link\":\"/01.后端技术栈/架构300讲.md\"},{\"text\":\"面试题\",\"link\":\"/01.后端技术栈/面试题.md\"}]},{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>