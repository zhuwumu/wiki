import{c as p,o as r,aj as h,j as a,J as l,a as i,w as n,k as e,ak as k,al as d}from"./chunks/framework.DA_nFhhl.js";import{N as t}from"./chunks/theme.CGhvi_vJ.js";const c=JSON.parse('{"title":"RuoYi-Cloud-Plus脚手架改良","description":"","frontmatter":{},"headers":[],"relativePath":"00.脚手架/RuoYi-Cloud-Plus脚手架改良.md","filePath":"00.脚手架/RuoYi-Cloud-Plus脚手架改良.md","lastUpdated":1762179876000}'),g={name:"00.脚手架/RuoYi-Cloud-Plus脚手架改良.md"},D=Object.assign(g,{setup(o){return(u,s)=>(r(),p("div",null,[s[7]||(s[7]=h('<h1 id="ruoyi-cloud-plus脚手架改良" tabindex="-1">RuoYi-Cloud-Plus脚手架改良 <a class="header-anchor" href="#ruoyi-cloud-plus脚手架改良" aria-label="Permalink to “RuoYi-Cloud-Plus脚手架改良”">​</a></h1><blockquote><p>RuoYi-Cloud-Plus项目文档：<a href="https://plus-doc.dromara.org/#/ruoyi-cloud-plus/home" target="_blank" rel="noreferrer">https://plus-doc.dromara.org/#/ruoyi-cloud-plus/home</a></p></blockquote><p><img src="'+k+'" alt="工程结构.drawio"></p><p>每一个层基本都自己对应的领域模型，这样就导致了有些人过于追求每一层都是用自己的领域模型，这样就导致了一个对象可能会出现3次甚至4次转换在一次请求中，当返回的时候同样也会出现3-4次转换，这样有可能一次完整的请求-返回会出现很多次对象转换。如果在开发中真的按照这么来，恐怕就别写其他的了，一天就光写这个重复无用的逻辑算了吧。</p><p>所以我们得采取一个折中的方案:</p><p><img src="'+d+`" alt="nqztos7p17"></p><h2 id="实际开发各层约定" tabindex="-1"><strong>实际开发各层约定</strong> <a class="header-anchor" href="#实际开发各层约定" aria-label="Permalink to “实际开发各层约定”">​</a></h2><ul><li><p>Controller层：进行参数校验等，只对应一个Service层，不做业务编排（如果以后复用的话，还得重新复制一遍逻辑）。</p></li><li><p>Service层：简单的CRUD，直接调用Mapper层，不需要Manager层，根据业务自行考量，不允许调用其他service层，防止循环依赖问题。（不需要继承MP的ServiceImpl，新版中大部分方法都已经删除，意义不大）</p></li><li><p>Manager层：逻辑复杂时使用。所有事务都在此处做，包括第三方API，Dubbo服务，尽量不与其他manager互相调用，主要是解决大事务的问题，可复用逻辑层。这里的Mannager可以是单个服务的，比如我们的cache,mq等等，当然也可以是复合的，当你需要调用多个Mannager的时候，这个可以合为一个Mannager，比如逻辑上的连表查询等。如果是httpMannager或rpcMannager需要在这一层做一些数据转换。</p></li><li><p>Mapper层：集成MP的BaseMapper方法，对外提供DO的数据，在此构造查询条件，可以生成default方法（复用MP提供的默认方法），private方法（便于复用，JDK9已支持）。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Mapper</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderBuyPassengerMapper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderBuyPassenger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * 组装参数这一步骤放在mapper层，而不是service层</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> list</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderBuyPassenger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listByBuyOrderIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LambdaQueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderBuyPassenger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; ew </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LambdaQueryWrapper&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ew.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(OrderBuyPassenger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getBuyOrderId, list);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ew);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul>`,8)),a("ol",null,[a("li",null,[l(e(t),{type:"error"},{default:n(()=>[...s[0]||(s[0]=[i("【强制】",-1)])]),_:1}),s[1]||(s[1]=i("虽然代码生成器提供单表完整的CRUD，但是考虑到实际项目，不是简单的CRUD，所以，要求，只复制单表的Mapper、DO类，其余controller、service、manager等类需要时手动编写，防止大量无用的类存在工程中（虽然可以自动生成，但无用类对维护人员来说是一种负担）。实际项目中，可能一个controller、service、manager就可以完成多个类的操作，总归一个原则，减少无用的类、字段，不让无用的类存在代码中，可扩展性是指结构和代码的设计模式优秀，而不是指提前预置一些无用的类（大多数情况下用不到）。",-1))]),a("li",null,[l(e(t),{type:"error"},{default:n(()=>[...s[2]||(s[2]=[i("【强制】",-1)])]),_:1}),s[3]||(s[3]=i("为避免MapStructUtils类转换的滥用，强制5（包含5个）个以下的属性必须使用get、set方法手动赋值。",-1))]),a("li",null,[l(e(t),{type:"warning"},{default:n(()=>[...s[4]||(s[4]=[i("【推荐】",-1)])]),_:1}),s[5]||(s[5]=i("明确是CRUD功能的表，比如配置等，使用代码生成器生成的CRUD代码（生成的方法命名一样，便于理解）。",-1))]),s[6]||(s[6]=a("li",null,null,-1))])]))}});export{c as __pageData,D as default};
