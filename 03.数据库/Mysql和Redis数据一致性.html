<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySql和Redis数据一致性 | Java全栈知识体系</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/wiki/assets/style.Dy6RAohZ.css" as="style">
    <link rel="preload stylesheet" href="/wiki/vp-icons.css" as="style">
    
    <script type="module" src="/wiki/assets/app.BEEvyIuZ.js"></script>
    <link rel="preload" href="/wiki/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/wiki/assets/chunks/theme.Br3hWqGG.js">
    <link rel="modulepreload" href="/wiki/assets/chunks/framework.C19qILHO.js">
    <link rel="modulepreload" href="/wiki/assets/03.数据库_Mysql和Redis数据一致性.md.DE9vJtCP.lean.js">
    <link rel="icon" type="image/svg+xml" href="/wiki/logo.svg">
    <link rel="icon" type="image/png" href="/wiki/logo.svg">
    <meta name="theme-color" content="#5f67ee">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="VitePress">
    <meta property="og:image" content="https://vitepress.dev/vitepress-og.jpg">
    <meta property="og:url" content="https://vitepress.dev/">
    <script src="https://cdn.usefathom.com/script.js" data-site="AZBRSFGG" data-spa="auto" defer></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-23583c4b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9e795ab0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9e795ab0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-23583c4b data-v-a6d8da9b><div class="VPNavBar" data-v-a6d8da9b data-v-ffa2fd26><div class="wrapper" data-v-ffa2fd26><div class="container" data-v-ffa2fd26><div class="title" data-v-ffa2fd26><div class="VPNavBarTitle has-sidebar" data-v-ffa2fd26 data-v-da8a54f2><a class="title" href="/wiki/" data-v-da8a54f2><!--[--><!--]--><!--[--><img class="VPImage logo" src="/wiki/logo.svg" alt data-v-d787fd3e><!--]--><span data-v-da8a54f2>Java全栈知识体系</span><!--[--><!--]--></a></div></div><div class="content" data-v-ffa2fd26><div class="content-body" data-v-ffa2fd26><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ffa2fd26><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ffa2fd26 data-v-d22b2d29><span id="main-nav-aria-label" class="visually-hidden" data-v-d22b2d29> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d22b2d29 data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4a50e214><span class="text" data-v-4a50e214><!----><span data-v-4a50e214>JAVA</span><span class="vpi-chevron-down text-icon" data-v-4a50e214></span></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><div class="items" data-v-e1486cb9><!--[--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/JAVA%E5%9F%BA%E7%A1%80.html" data-v-1f75538e><!--[--><span data-v-1f75538e>JAVA基础</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/01.%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/%E5%A4%9A%E7%BA%BF%E7%A8%8B/JAVA%E5%B9%B6%E5%8F%91-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80.html" data-v-1f75538e><!--[--><span data-v-1f75538e>多线程</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d22b2d29 data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4a50e214><span class="text" data-v-4a50e214><!----><span data-v-4a50e214>Spring全家桶</span><span class="vpi-chevron-down text-icon" data-v-4a50e214></span></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><div class="items" data-v-e1486cb9><!--[--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/02.Spring/Spring-@Transactional%E4%BA%8B%E5%8A%A1%E5%A4%B1%E6%95%88%E7%9A%84%E5%9C%BA%E6%99%AF.html" data-v-1f75538e><!--[--><span data-v-1f75538e>Spring</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/02.Spring/SpringBoot.html" data-v-1f75538e><!--[--><span data-v-1f75538e>SpringBoot</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d22b2d29 data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4a50e214><span class="text" data-v-4a50e214><!----><span data-v-4a50e214>数据库</span><span class="vpi-chevron-down text-icon" data-v-4a50e214></span></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><div class="items" data-v-e1486cb9><!--[--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E7%B4%A2%E5%BC%95.html" data-v-1f75538e><!--[--><span data-v-1f75538e>MySQL</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80.html" data-v-1f75538e><!--[--><span data-v-1f75538e>Redis</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d22b2d29 data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4a50e214><span class="text" data-v-4a50e214><!----><span data-v-4a50e214>中间件</span><span class="vpi-chevron-down text-icon" data-v-4a50e214></span></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><div class="items" data-v-e1486cb9><!--[--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/04.%E4%B8%AD%E9%97%B4%E4%BB%B6/Kafka.html" data-v-1f75538e><!--[--><span data-v-1f75538e>Kafka</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/04.%E4%B8%AD%E9%97%B4%E4%BB%B6/Zookeeper.html" data-v-1f75538e><!--[--><span data-v-1f75538e>Zookeeper</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/04.%E4%B8%AD%E9%97%B4%E4%BB%B6/Netty.html" data-v-1f75538e><!--[--><span data-v-1f75538e>Netty</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/02.%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E6%A0%88/JavaScript.html" tabindex="0" data-v-d22b2d29 data-v-4a75a8b2><!--[--><span data-v-4a75a8b2>前端</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/03.%E5%B7%A5%E5%85%B7-%E9%83%A8%E7%BD%B2/Linux%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.html" tabindex="0" data-v-d22b2d29 data-v-4a75a8b2><!--[--><span data-v-4a75a8b2>工具|运维</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/06.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/0-%E7%AE%80%E4%BB%8B.html" tabindex="0" data-v-d22b2d29 data-v-4a75a8b2><!--[--><span data-v-4a75a8b2>设计模式</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d22b2d29 data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4a50e214><span class="text" data-v-4a50e214><!----><span data-v-4a50e214>方法论</span><span class="vpi-chevron-down text-icon" data-v-4a50e214></span></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><div class="items" data-v-e1486cb9><!--[--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/04.%E6%96%B9%E6%B3%95%E8%AE%BA/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.html" data-v-1f75538e><!--[--><span data-v-1f75538e>代码规范</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/04.%E6%96%B9%E6%B3%95%E8%AE%BA/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B.html" data-v-1f75538e><!--[--><span data-v-1f75538e>开发流程</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/04.%E6%96%B9%E6%B3%95%E8%AE%BA/%E5%BC%80%E5%8F%91%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.html" data-v-1f75538e><!--[--><span data-v-1f75538e>开发注意事项</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d22b2d29 data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4a50e214><span class="text" data-v-4a50e214><!----><span data-v-4a50e214>架构</span><span class="vpi-chevron-down text-icon" data-v-4a50e214></span></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><div class="items" data-v-e1486cb9><!--[--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/05.%E6%9E%B6%E6%9E%84/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF%E7%82%B9/JWT.html" data-v-1f75538e><!--[--><span data-v-1f75538e>常用技术点</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/05.%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84900%E8%AE%B2/%E5%9C%BA%E6%99%AF.html" data-v-1f75538e><!--[--><span data-v-1f75538e>架构900讲</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/05.%E6%9E%B6%E6%9E%84/%E4%BB%A3%E7%A0%81%E4%B8%89%E5%8D%83%E9%97%AE.html" data-v-1f75538e><!--[--><span data-v-1f75538e>代码三千问</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/05.%E6%9E%B6%E6%9E%84/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E8%84%9A%E6%89%8B%E6%9E%B6.html" data-v-1f75538e><!--[--><span data-v-1f75538e>后台管理脚手架</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/05.%E6%9E%B6%E6%9E%84/RuoYi-Cloud-Plus%E8%84%9A%E6%89%8B%E6%9E%B6%E6%94%B9%E8%89%AF.html" data-v-1f75538e><!--[--><span data-v-1f75538e>RuoYi-Cloud-Plus改良</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e1486cb9 data-v-1f75538e><a class="VPLink link" href="/wiki/05.%E6%9E%B6%E6%9E%84/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4JAVA%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%E8%A7%A3%E8%AF%BB/06%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84.html" data-v-1f75538e><!--[--><span data-v-1f75538e>阿里巴巴JAVA开发手册解读</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wiki/09.%E4%BB%A3%E7%A0%81%E4%BA%BA%E7%94%9F/%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86%E7%82%B9.html" tabindex="0" data-v-d22b2d29 data-v-4a75a8b2><!--[--><span data-v-4a75a8b2>代码人生</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ffa2fd26 data-v-81eb5aa6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-81eb5aa6 data-v-839a6a42 data-v-2a164b90><span class="check" data-v-2a164b90><span class="icon" data-v-2a164b90><!--[--><span class="vpi-sun sun" data-v-839a6a42></span><span class="vpi-moon moon" data-v-839a6a42></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ffa2fd26 data-v-2db00ad5 data-v-9c2efea0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="me noopener" data-v-9c2efea0 data-v-eb0464bf><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ffa2fd26 data-v-73f78c0f data-v-4a50e214><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4a50e214><span class="vpi-more-horizontal icon" data-v-4a50e214></span></button><div class="menu" data-v-4a50e214><div class="VPMenu" data-v-4a50e214 data-v-e1486cb9><!----><!--[--><!--[--><!----><div class="group" data-v-73f78c0f><div class="item appearance" data-v-73f78c0f><p class="label" data-v-73f78c0f>Appearance</p><div class="appearance-action" data-v-73f78c0f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-73f78c0f data-v-839a6a42 data-v-2a164b90><span class="check" data-v-2a164b90><span class="icon" data-v-2a164b90><!--[--><span class="vpi-sun sun" data-v-839a6a42></span><span class="vpi-moon moon" data-v-839a6a42></span><!--]--></span></span></button></div></div></div><div class="group" data-v-73f78c0f><div class="item social-links" data-v-73f78c0f><div class="VPSocialLinks social-links-list" data-v-73f78c0f data-v-9c2efea0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="me noopener" data-v-9c2efea0 data-v-eb0464bf><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ffa2fd26 data-v-fca06195><span class="container" data-v-fca06195><span class="top" data-v-fca06195></span><span class="middle" data-v-fca06195></span><span class="bottom" data-v-fca06195></span></span></button></div></div></div></div><div class="divider" data-v-ffa2fd26><div class="divider-line" data-v-ffa2fd26></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-23583c4b data-v-47109c5c><div class="container" data-v-47109c5c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-47109c5c><span class="vpi-align-left menu-icon" data-v-47109c5c></span><span class="menu-text" data-v-47109c5c>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-47109c5c data-v-81b729f8><button data-v-81b729f8>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-23583c4b data-v-801d095b><div class="curtain" data-v-801d095b></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-801d095b><span class="visually-hidden" id="sidebar-aria-label" data-v-801d095b> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-ee2566ff><section class="VPSidebarItem level-0 has-active" data-v-ee2566ff data-v-f3818e0d><!----><div class="items" data-v-f3818e0d><!--[--><section class="VPSidebarItem level-1" data-v-f3818e0d data-v-f3818e0d><div class="item" role="button" tabindex="0" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><h3 class="text" data-v-f3818e0d>MySQL</h3><!----></div><div class="items" data-v-f3818e0d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E7%B4%A2%E5%BC%95.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>索引</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E4%BA%8B%E5%8A%A1.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>事务</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-SQL%E4%BC%98%E5%8C%96.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>SQL优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>主从复制的原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>主从复制数据一致性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E5%85%A8%E5%B1%80ID.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>分库分表全局ID</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E6%B7%B1%E5%BA%A6%E5%88%86%E9%A1%B5.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>深度分页limit</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E5%A4%A7%E5%8E%82%E5%AE%9E%E8%B7%B5-%E7%BE%8E%E5%9B%A2MySQL%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86%E5%8F%8A%E6%85%A2%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>大厂实践:美团MySQL索引原理及慢查询优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/MySql-%E5%A4%A7%E5%8E%82%E5%AE%9E%E8%B7%B5-%E7%BE%8E%E5%9B%A2SQL%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7SQLAdvisor%E5%BC%80%E6%BA%90.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>大厂实践:美团SQL优化工具SQLAdvisor开源</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-f3818e0d data-v-f3818e0d><div class="item" role="button" tabindex="0" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><h3 class="text" data-v-f3818e0d>Redis</h3><!----></div><div class="items" data-v-f3818e0d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%A6%82%E5%BF%B5%E5%92%8C%E5%9F%BA%E7%A1%80.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>概念和基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%AF%B9%E8%B1%A1%E6%9C%BA%E5%88%B6.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>数据结构-对象机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>数据结构-底层数据结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BC%96%E7%A0%81(%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84).html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>数据结构-对象与编码(底层结构)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%8C%81%E4%B9%85%E5%8C%96RDB%E5%92%8CAOP.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>持久化RDB和AOF</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E9%AB%98%E5%8F%AF%E7%94%A8-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>高可用-主从复制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E9%AB%98%E5%8F%AF%E7%94%A8-%E5%93%A8%E5%85%B5%E6%9C%BA%E5%88%B6.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>高可用-哨兵机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>性能调优</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/Redis.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>Redis相关问题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E5%9C%BA%E6%99%AF%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>场景及解决方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-f3818e0d data-v-f3818e0d><div class="item" data-v-f3818e0d><div class="indicator" data-v-f3818e0d></div><a class="VPLink link link" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E5%92%8CRedis%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7.html" data-v-f3818e0d><!--[--><p class="text" data-v-f3818e0d>MySQL和Redis数据一致性</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-23583c4b data-v-cc0c16d2><div class="VPDoc has-sidebar has-aside" data-v-cc0c16d2 data-v-6ad61cc6><!--[--><!--]--><div class="container" data-v-6ad61cc6><div class="aside" data-v-6ad61cc6><div class="aside-curtain" data-v-6ad61cc6></div><div class="aside-container" data-v-6ad61cc6><div class="aside-content" data-v-6ad61cc6><div class="VPDocAside" data-v-6ad61cc6 data-v-f2ee3264><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-f2ee3264 data-v-8f0fe69a><div class="content" data-v-8f0fe69a><div class="outline-marker" data-v-8f0fe69a></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-8f0fe69a>页面导航</div><ul class="VPDocOutlineItem root" data-v-8f0fe69a data-v-0c43a097><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-f2ee3264></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6ad61cc6><div class="content-container" data-v-6ad61cc6><!--[--><!--]--><main class="main" data-v-6ad61cc6><div style="position:relative;" class="vp-doc _wiki_03_%E6%95%B0%E6%8D%AE%E5%BA%93_Mysql%E5%92%8CRedis%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7" data-v-6ad61cc6><div><h1 id="mysql和redis数据一致性" tabindex="-1">MySql和Redis数据一致性 <a class="header-anchor" href="#mysql和redis数据一致性" aria-label="Permalink to “MySql和Redis数据一致性”">​</a></h1><h2 id="一、谈谈一致性" tabindex="-1">一、谈谈一致性 <a class="header-anchor" href="#一、谈谈一致性" aria-label="Permalink to “一、谈谈一致性”">​</a></h2><ul><li><strong>强一致性</strong>：如果你的项目对缓存的要求是强一致性的，那么请不要使用缓存。这种一致性级别是最符合用户直觉的，它要求系统写入什么，读出来的也会是什么，用户体验好，但实现起来往往对系统的性能影响大。读请求和写请求会串行化，串到一个内存队列里去，这样会大大增加系统的处理效率，吞吐量也会大大降低。</li><li><strong>弱一致性</strong>：这种一致性级别约束了系统在写入成功后，不承诺立即可以读到写入的值，也不承诺多久之后数据能够达到一致，但会尽可能地保证到某个时间级别（比如秒级别）后，数据能够达到一致状态。</li><li><strong>最终一致性</strong>：最终一致性是弱一致性的一个特例，系统会保证在一定时间内，能够达到一个数据一致的状态。这里之所以将最终一致性单独提出来，是因为它是弱一致性中非常推崇的一种一致性模型，也是业界在大型分布式系统的数据一致性上比较推崇的模型。一般情况下，高可用只确保最终一致性，不确保强一致性。</li></ul><h2 id="二、场景分析" tabindex="-1">二、场景分析 <a class="header-anchor" href="#二、场景分析" aria-label="Permalink to “二、场景分析”">​</a></h2><p>一份数据同时保存在数据库和Redis里面，当数据发生变化的时候，需要同时更新Redis和Mysql，由于更新操作是有先后顺序的，并且它并不像Mysql中的多表事务操作可以满足ACID的特性，所以就会出现数据一致性的问题。</p><h2 id="三、同步策略" tabindex="-1">三、同步策略 <a class="header-anchor" href="#三、同步策略" aria-label="Permalink to “三、同步策略”">​</a></h2><p>删除缓存，在高并发情况下，同一时间大量请求该条数据，第一条查询未完成写入缓存操作时，导致大量请求会直接打到数据库，造成数据库压力过大。</p><h3 id="_1、先更新数据库-再更新缓存-一般不考虑" tabindex="-1">1、先更新数据库，再更新缓存（一般不考虑） <a class="header-anchor" href="#_1、先更新数据库-再更新缓存-一般不考虑" aria-label="Permalink to “1、先更新数据库，再更新缓存（一般不考虑）”">​</a></h3><p>这个⽅案存在如下问题：</p><p>（1）如果先更新MySQL成功了，还未对Redis进⾏更新的间隙期，这时如果请求过来，读到的都是 Redis的更新前数据。</p><p>（2）如果先更新MySQL成功了，再更新Redis失败了的话，后⾯的请求读到的都是Redis的更新前数 据，并且后续的补救⽅案很难做。</p><p>补救⽅案⼀：为Redis更新失败，将MySQL中的对应数据也回滚了，以此达到两者数据的⼀致性。但 MySQL是主数据源，它代表的是数据的“权威性”，这样做显然并不合理。</p><p>补救⽅案⼆：通过Redis重试更新的⽅式进⾏补救。但如果重试也失败了，还要继续重试吗？是设置固定 的重试次数，还是⼀直重试到成功为⽌？ 另外，重试时间间隔设置多少？时间间隔设置⻓了，影响业务的时间也会变⻓；时间间隔设置短了，重 试成功率⼜会降低。这些其实都是问题。</p><p>（3）两个线程同时更新的并发问题。</p><h3 id="_2、先更新缓存-再更新数据库-一般不考虑" tabindex="-1">2、先更新缓存，再更新数据库（一般不考虑） <a class="header-anchor" href="#_2、先更新缓存-再更新数据库-一般不考虑" aria-label="Permalink to “2、先更新缓存，再更新数据库（一般不考虑）”">​</a></h3><p>这个⽅案，要⽐⽅案⼀的“先更新MySQL，再更新Redis”合理⼀些。原因在于更新完Redis的话，哪怕还 没更新MySQL，这时如果请求过来，读到的都是Redis更新后的新数据。 另外，先更新Redis成功，再更新MySQL失败，可以通过再删除Redis所对应的数据进⾏补救。</p><p>但其依然存在如下问题：</p><p>（1）如果先更新Redis成功了，再更新MySQL失败了的话，还未对Redis所对应的数据进⾏删除补救的 间隙期，这时如果请求过来，读到的都是Redis未⽣效的新数据。</p><p>（2）如果先更新Redis成功了，再更新MySQL失败了的话，然后再删除Redis对应的数据也失败的时 候，应该如何处理？如果通过重试机制继续进⾏删除Redis的话，⼜会⾯临之前说的重试次数和间隔期的 问题。</p><p>（3）两个线程同时更新的并发问题。</p><h3 id="_3、先更新数据库-再删除缓存" tabindex="-1">3、先更新数据库，再删除缓存 <a class="header-anchor" href="#_3、先更新数据库-再删除缓存" aria-label="Permalink to “3、先更新数据库，再删除缓存”">​</a></h3><p>这个⽅案可以解决“并发更新”的问题，但依然会存在下⾯的两个问题：</p><p>（1）如果先更新MySQL成功了，还未对Redis进⾏删除的间隙期，这时如果请求过来，读到的都是 Redis的删除前数据。</p><p>（2）如果先更新MySQL成功了，再删除Redis失败了的话，后⾯的请求读到的都是Redis的删除前数 据，并且后续的补救⽅案很难做。</p><h3 id="_4、先删除缓存-再更新数据库" tabindex="-1">4、先删除缓存，再更新数据库 <a class="header-anchor" href="#_4、先删除缓存-再更新数据库" aria-label="Permalink to “4、先删除缓存，再更新数据库”">​</a></h3><p>这个⽅案能解决⽅案3中遗留的两个棘⼿的问题：</p><p>（1）如果先删除Redis成功了，还未对MySQL进⾏更新的间隙期，此时对于该条数据⽽⾔，只存在于 MySQL⼀个存储载体中，也就没有了数据⼀致性的问题。</p><p>（2）如果先删除Redis成功了，再更新MySQL失败了的话，此时对于该条数据⽽⾔，只存在于MySQL ⼀个存储载体中，所谓的补救⽅案也就不需要了，直接当这条数据没更新成功。</p><p>OK，整体看起来似乎“天下⽆贼”了，但真的如此吗？其实不然，如果配合上Redis的“读策略”，还是会 有数据⼀致性的问题。</p><h4 id="_4-1-先删除redis-再更新mysql-redis读策略" tabindex="-1">4.1 先删除Redis，再更新MySQL + Redis读策略 <a class="header-anchor" href="#_4-1-先删除redis-再更新mysql-redis读策略" aria-label="Permalink to “4.1 先删除Redis，再更新MySQL + Redis读策略”">​</a></h4><p>Redis的读策略：</p><p>如果读取的数据在Redis中存在，则直接返回数据； 如果读取的数据在Redis中不存在，则从MySQL中读取数据，然后将数据写⼊到Redis，并返回数据。</p><p>这样⼀来，就会存在如下问题： 某商品的库存数为10个，⽤户A购买⼀件商品时进⾏库存扣减，因此第⼀步先删除了Redis中的库存数。 这时，⽤户B查询该商品的库存，发现Redis中并没有该商品的库存，于是从MySQL中读取库存数后，写 ⼊到了Redis中（10个）。 然后，⽤户A更新数据库，将库存数从10个扣减为9个。 最终，Redis中的库存数是10个，MySQL中的库存数是9个。</p><p><img src="/wiki/images/03%E6%95%B0%E6%8D%AE%E5%BA%93/20.png" alt=""></p><h4 id="_4-2-先删除redis-再更新mysql-binlog同步-不推荐" tabindex="-1">4.2 先删除Redis，再更新MySQL + Binlog同步 (不推荐) <a class="header-anchor" href="#_4-2-先删除redis-再更新mysql-binlog同步-不推荐" aria-label="Permalink to “4.2 先删除Redis，再更新MySQL + Binlog同步 (不推荐)”">​</a></h4><p>该⽅案将填充Redis的操作，改为通过DataBus和Canal同步Binlog的⽅式，这样可以解决⽅案4.1中的 Redis读策略带来的数据⼀致性问题。</p><p><img src="/wiki/images/03%E6%95%B0%E6%8D%AE%E5%BA%93/2.png" alt=""></p><p>但是，这种⽅案的适⽤于数据量不⼤，可以完全吃进Redis缓存中，并设置为永不过期的场景。 ⽽那种数据量庞⼤到不能全部吃进Redis缓存中，需要在数据读取的时机来写⼊Redis，⻓时间未被读取 的数据则过期淘汰的场景，就不适合了。 因为这种⽅案的缓存命中率太低了，也就失去了其应有的价值</p><h4 id="_4-3-先删除redis-再更新mysql-redis读策略-延时双删" tabindex="-1">4.3* 先删除Redis，再更新MySQL + Redis读策略 + 延时双删 <a class="header-anchor" href="#_4-3-先删除redis-再更新mysql-redis读策略-延时双删" aria-label="Permalink to “4.3* 先删除Redis，再更新MySQL + Redis读策略 + 延时双删”">​</a></h4><p>这个⽅案稍复杂了⼀些，是在⽅案4.1中“先删除Redis，再更新MySQL + Redis读策略”，⼜增加了最后 ⼀步Redis删除的操作。 它可以解决“最终，Redis中的库存数是10个，MySQL中的库存数是9个”的数据⼀致性场景。</p><p><img src="/wiki/images/03%E6%95%B0%E6%8D%AE%E5%BA%93/3.png" alt=""></p><p>也可以跟⽅案4.2中 “数据量庞⼤到不能全部吃进Redis缓存中，需要在数据读取的时机来写⼊Redis，⻓ 时间未被读取的数据则过期淘汰”的不适合场景进⾏互补。</p><p>有⼈会说，这种⽅案也不能100%保证解决数据⼀致性的问题，如果最后⼀步删除操作失败了怎么办？ 确实，它并不能保证100%。 但如果第⼀步删除Redis成功了，第⼆步Redis读策略恰好在这个间隙期发⽣并写⼊Redis成功了，⽽第三 步删除Redis⼜失败了，这种概率有多⼤？0.0000001%的可能性有没有？</p><h4 id="_5、延时双删" tabindex="-1">5、延时双删 <a class="header-anchor" href="#_5、延时双删" aria-label="Permalink to “5、延时双删”">​</a></h4><p>该方案还存在并发引发的一致性问题，假设同时有两个线程进行数据更新操作，如下图所示。当缓存被线程一删除后，如果此时有新的读请求（线程二）发生，由于缓存已经被删除，这个读请求（线程二）将会去从数据库查询。如果此时线程一还没有修改完数据库，线程二从数据库读的数据仍然是旧值，同时线程二将读的旧值写入到缓存。线程一完成后，数据库变为新值，而缓存还是旧值。当发生读/写并发时，还是存在数据不一致的情况。如何解决呢？最简单的解决办法就是<strong>延时双删策略</strong>：先淘汰缓存、再写数据库、休眠后再次淘汰缓存。这样做的目的，就是确保读请求结束，写请求可以删除读请求造成的缓存脏数据。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteRedisData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UserInfo userInfo){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 删除Redis中的缓存数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    jedis.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userInfo);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 更新MySQL数据库数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    userInfoDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userInfo);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TimeUnit.SECONDS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        exp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 删除Redis中的缓存数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    jedis.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userInfo);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>延时双删就能彻底解决不一致吗？当然不一定来。首先，我们评估的延时时间并不能完全代表实际运行过程中的耗时，运行过程如果因为系统压力过大，我们评估的耗时就是不准确，仍然会导致数据不一致的出现。其次，延时双删虽然在保证事务提交完以后再进行删除缓存，但是如果使用的是MySQL的读写分离的机构，主从同步之间其实也会有时间差。</p><h4 id="_6、-分布式锁" tabindex="-1">6、 分布式锁 <a class="header-anchor" href="#_6、-分布式锁" aria-label="Permalink to “6、 分布式锁”">​</a></h4><p>虽然分布式锁可以完全解决一致性问题，但影响性能。</p><h2 id="四、解决办法" tabindex="-1">四、解决办法 <a class="header-anchor" href="#四、解决办法" aria-label="Permalink to “四、解决办法”">​</a></h2><p>考虑一致性的时候，也要考虑是否需要解耦及场景的复杂性，根据场景要求，满足即可。</p><ol><li><p>先更新数据库，后删除缓存。但会导致同一时间高流量，容易直接打到数据库，有极大风险。</p></li><li><p>异步更新(异步通知)</p><p>在更新数据库数据时，同时发送一个异步通知给Redis，让Redis知道数据库数据已经更新，需要更新缓存中的数据。这个过程是异步的，不会阻塞数据库的更新操作。当Redis收到异步通知后，会立即删除缓存中对应的数据，确保缓存中没有旧数据。这样，即使在这个过程中有新的读请求发生，也不会读取到旧数据。等到数据库更新完成后，Redis再次从数据库中读取最新的数据并缓存起来。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更新MySQL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 发送消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rabbitTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convertAndSend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;updateUser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 然后在消息消费者中更新Redis。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RabbitListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">queues</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;updateUser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String userId) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    redisTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opsForValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(redisTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">opsForValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), user);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>这种异步通知的方式，可以确保Redis中的数据与数据库中的数据保持一致，避免出现数据不一致的情况。这种方案可以降低数据不一致的风险，但仍然无法完全避免。因为消息队列本身也可能因为各种原因丢失消息。</p></li><li><p>用 Redisson 实现读锁和写锁</p></li></ol><p>如果需要在极端情况下仍然去保证Redis和Mysql的数据一致性就只能采用最终一致性的一个方案</p><p><img src="/wiki/images/03%E6%95%B0%E6%8D%AE%E5%BA%93/mysql.webp" alt=""></p><h3 id="基于rocketmq的可靠性通信" tabindex="-1">基于RocketMq的可靠性通信 <a class="header-anchor" href="#基于rocketmq的可靠性通信" aria-label="Permalink to “基于RocketMq的可靠性通信”">​</a></h3><ol><li>更新数据库的数据</li><li>更新redis的数据</li><li>失败的请求写入mq事务消息</li><li>异步重试，确保成功</li></ol><h3 id="基于canal组件" tabindex="-1">基于canal组件 <a class="header-anchor" href="#基于canal组件" aria-label="Permalink to “基于canal组件”">​</a></h3><ol><li>更新数据库的数据</li><li>更新redis的数据</li><li>从binlog加载数据</li><li>同步到Redis里面</li></ol><p>如果业务不能接受短期的不一致性，那么就不能这样的一个方案来实现</p><h3 id="基于binlog" tabindex="-1">基于binlog <a class="header-anchor" href="#基于binlog" aria-label="Permalink to “基于binlog”">​</a></h3><p>那如何能解决binlog监听时的数据乱序问题，并且有一定的容错机制保证缓存的最终一致性？</p><p>​ 如下图所示，我们基于之前的binlog监听方案新增了两处改动。</p><ol><li><p>通过监听消费binlog时记录binlog产生时间，并且每次对比binlog时间解决多线程消费的情况下，缓存和db数据最终不一致的问题；</p></li><li><p>由于每次update都会产生binlog，那么对于配置表的全表update（非业务字段，如set update_time=now()）即可完成数据全量更新同步至缓存，通过定时任务定时触发，这样就能给业务带来更高的容错性。</p><p><img src="/wiki/images/03%E6%95%B0%E6%8D%AE%E5%BA%93/mysql2.webp" alt=""></p></li></ol><h2 id="参考文章" tabindex="-1">参考文章 <a class="header-anchor" href="#参考文章" aria-label="Permalink to “参考文章”">​</a></h2><ul><li><code>https://juejin.cn/post/7388033437173678090</code></li><li><code>https://juejin.cn/post/7050768976355262501</code></li><li><code>https://juejin.cn/post/7081921047578017828</code></li></ul></div></div></main><footer class="VPDocFooter" data-v-6ad61cc6 data-v-174276d8><!--[--><!--]--><div class="edit-info" data-v-174276d8><!----><div class="last-updated" data-v-174276d8><p class="VPLastUpdated" data-v-174276d8 data-v-9de70b12>最后更新: <time datetime="2025-11-03T14:24:36.000Z" data-v-9de70b12></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-174276d8><span class="visually-hidden" id="doc-footer-aria-label" data-v-174276d8>Pager</span><div class="pager" data-v-174276d8><a class="VPLink link pager-link prev" href="/wiki/03.%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/%E5%9C%BA%E6%99%AF%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" data-v-174276d8><!--[--><span class="desc" data-v-174276d8>上一页</span><span class="title" data-v-174276d8>场景及解决方案</span><!--]--></a></div><div class="pager" data-v-174276d8><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div><div class="n-back-top-placeholder" style="display: none" aria-hidden="true"><!----></div><!--[--><!--]--><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"01.后端技术栈_java基础.md\":\"CggjxwZq\",\"01.后端技术栈_java基础2.md\":\"D4F-MJCO\",\"01.后端技术栈_jdk8-21.md\":\"BULisQjV\",\"01.后端技术栈_多线程_java并发-threadlocal.md\":\"Fr1a_k6_\",\"01.后端技术栈_多线程_java并发-理论基础.md\":\"DAzoOzdY\",\"01.后端技术栈_多线程_juc线程池-completablefuture.md\":\"bPM66Mx7\",\"01.后端技术栈_多线程_juc线程池-threadpoolexecutor.md\":\"zETgJ56Q\",\"01.后端技术栈_多线程_juc集合-blockingqueue.md\":\"D5WNe_Jf\",\"01.后端技术栈_多线程_关键字final.md\":\"oMO-qKPG\",\"01.后端技术栈_多线程_关键字synchronized.md\":\"CNcYt4oE\",\"01.后端技术栈_多线程_关键字volatile.md\":\"su7OfkmC\",\"01.后端技术栈_算法.md\":\"CQ3OHCmQ\",\"01.后端技术栈_网络io.md\":\"C6FfTTkm\",\"02.spring_spring-@transactional事务失效的场景.md\":\"DkTCzXpA\",\"02.spring_spring.md\":\"Dhp9j2jv\",\"02.spring_springboot.md\":\"CojKNxP2\",\"02.spring_springcloud.md\":\"Bhg7_xnR\",\"02.前端技术栈_javascript.md\":\"DgSqIDjZ\",\"02.算法_算法基础和思想_数据结构基础_数据结构基础概述.md\":\"oD7FJSXA\",\"02.算法_算法基础和思想_数据结构基础_线性表-数组和矩阵.md\":\"81YKVU7_\",\"02.算法_算法基础和思想_数据结构基础_线性表-链表.md\":\"BIec-RbQ\",\"03.工具-部署_docker.md\":\"DPwdPqwU\",\"03.工具-部署_git.md\":\"DBIB176I\",\"03.工具-部署_idea使用技巧.md\":\"CqboA5ze\",\"03.工具-部署_linux运维笔记.md\":\"COYqp6K5\",\"03.工具-部署_常见单词.md\":\"8SJS5Uya\",\"03.工具-部署_收藏目录.md\":\"FkJEvI1W\",\"03.数据库_mysql_mysql-sql优化.md\":\"BFDcEmmY\",\"03.数据库_mysql_mysql-主从复制数据一致性.md\":\"fKrunJZw\",\"03.数据库_mysql_mysql-主从复制的原理.md\":\"CEZ8uLJb\",\"03.数据库_mysql_mysql-事务.md\":\"CUX3D5Rm\",\"03.数据库_mysql_mysql-全局id.md\":\"dFBHJCHK\",\"03.数据库_mysql_mysql-大厂实践-美团mysql索引原理及慢查询优化.md\":\"BSn4O6f3\",\"03.数据库_mysql_mysql-大厂实践-美团sql优化工具sqladvisor开源.md\":\"D_ohyjan\",\"03.数据库_mysql_mysql-深度分页.md\":\"DIa4KFbI\",\"03.数据库_mysql_mysql-索引.md\":\"BiT-TK9D\",\"03.数据库_mysql和redis数据一致性.md\":\"DE9vJtCP\",\"03.数据库_redis_redis.md\":\"CQ7v1bve\",\"03.数据库_redis_场景及解决方案.md\":\"CkXXtF68\",\"03.数据库_redis_性能调优.md\":\"Bnmi9_ig\",\"03.数据库_redis_持久化rdb和aop.md\":\"ZxtT7mJJ\",\"03.数据库_redis_数据结构-对象与编码(底层结构).md\":\"TojVrY7I\",\"03.数据库_redis_数据结构-对象机制.md\":\"D_-SWTzd\",\"03.数据库_redis_数据结构-底层数据结构.md\":\"CoqGLeOt\",\"03.数据库_redis_概念和基础.md\":\"DPnAJwDe\",\"03.数据库_redis_高可用-主从复制.md\":\"BQUd7GGT\",\"03.数据库_redis_高可用-哨兵机制.md\":\"Cy4TxDDR\",\"04.中间件_kafka.md\":\"CrM-cUzV\",\"04.中间件_netty.md\":\"D9DITacU\",\"04.中间件_zookeeper.md\":\"C6eZVGeD\",\"04.方法论_代码规范.md\":\"BGlweBmk\",\"04.方法论_开发注意事项.md\":\"Be2X1QJF\",\"04.方法论_开发流程.md\":\"CWYQ-FDa\",\"05.架构_ruoyi-cloud-plus脚手架改良.md\":\"CpzqvLxN\",\"05.架构_代码三千问.md\":\"BDCUC4U-\",\"05.架构_后台管理系统脚手架.md\":\"DR7RIoQP\",\"05.架构_常用技术点_jwt.md\":\"BDl24Dg5\",\"05.架构_常用技术点_数据库读写分离.md\":\"BDnN8Qmy\",\"05.架构_架构900讲_mq.md\":\"BPxNBXAo\",\"05.架构_架构900讲_场景.md\":\"D40hDfeu\",\"05.架构_架构900讲_数据库-mysql.md\":\"B-uW8ylV\",\"05.架构_架构900讲_数据库-redis.md\":\"DnnoMgF_\",\"05.架构_架构900讲_运维.md\":\"CTrZk60F\",\"05.架构_阿里巴巴java开发手册解读_01编码规约.md\":\"GqVKU5Y3\",\"05.架构_阿里巴巴java开发手册解读_06工程结构.md\":\"P4rjJxtW\",\"06.设计模式_0-简介.md\":\"B3YiTaEU\",\"06.设计模式_1-单例模式.md\":\"D6vizuJ1\",\"06.设计模式_10-桥接模式.md\":\"Da51wku8\",\"06.设计模式_11-组合模式.md\":\"DR4viQx7\",\"06.设计模式_12-享元模式.md\":\"glfnlYkK\",\"06.设计模式_13-观察者模式.md\":\"DgjArxnt\",\"06.设计模式_14-策略模式.md\":\"DOUEGvvn\",\"06.设计模式_15-命令模式.md\":\"CQj9Ksr0\",\"06.设计模式_16-中介者模式.md\":\"BkUW1yqm\",\"06.设计模式_17-备忘录模式.md\":\"DPTsMmpY\",\"06.设计模式_18-模板方法模式.md\":\"DC4nZNMZ\",\"06.设计模式_19-迭代器模式.md\":\"dZifd4OS\",\"06.设计模式_2-工厂方法模式.md\":\"azsQG0kx\",\"06.设计模式_20-状态模式.md\":\"C04bgJo8\",\"06.设计模式_21-责任链模式.md\":\"Di4CCOQa\",\"06.设计模式_22-解释器模式.md\":\"B_92OzHF\",\"06.设计模式_23-访问者模式.md\":\"CJmG3_vw\",\"06.设计模式_3-抽象工厂模式.md\":\"8v_XK6W_\",\"06.设计模式_4-建造者模式.md\":\"IJn7s-c2\",\"06.设计模式_5-原型模式.md\":\"EXZ4C6Fe\",\"06.设计模式_6-适配器模式.md\":\"BhkTelOL\",\"06.设计模式_7-代理模式.md\":\"DKKzN7F-\",\"06.设计模式_8-装饰模式.md\":\"4IxGQQ6W\",\"06.设计模式_9-外观模式.md\":\"BaHSFLjR\",\"09.代码人生_常见知识点.md\":\"w4URA0XV\",\"09.代码人生_生活小技巧.md\":\"Dk8-v9-2\",\"09.杂记_40岁前实现的事情.md\":\"D23n0FXo\",\"09.杂记_三十而立之年.md\":\"BU1spSu4\",\"09.杂记_人生教训.md\":\"C9XtIKQ-\",\"09.杂记_改变.md\":\"CMd3eibx\",\"09.杂记_每日计划.md\":\"Cnd81myy\",\"index.md\":\"mG2rIXZJ\",\"面试题.md\":\"CSuad7DT\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Java全栈知识体系\",\"description\":\"A VitePress site\",\"base\":\"/wiki/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"outline\":{\"level\":\"deep\",\"label\":\"页面导航\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"nav\":[{\"text\":\"JAVA\",\"items\":[{\"text\":\"JAVA基础\",\"link\":\"/01.后端技术栈/JAVA基础\"},{\"text\":\"多线程\",\"link\":\"/01.后端技术栈/多线程/JAVA并发-理论基础\"}]},{\"text\":\"Spring全家桶\",\"items\":[{\"text\":\"Spring\",\"link\":\"/02.Spring/Spring-@Transactional事务失效的场景\"},{\"text\":\"SpringBoot\",\"link\":\"/02.Spring/SpringBoot\"}]},{\"text\":\"数据库\",\"items\":[{\"text\":\"MySQL\",\"link\":\"/03.数据库/MySQL/MySql-索引\"},{\"text\":\"Redis\",\"link\":\"/03.数据库/Redis/概念和基础\"}]},{\"text\":\"中间件\",\"items\":[{\"text\":\"Kafka\",\"link\":\"/04.中间件/Kafka.md\"},{\"text\":\"Zookeeper\",\"link\":\"/04.中间件/Zookeeper.md\"},{\"text\":\"Netty\",\"link\":\"/04.中间件/Netty.md\"}]},{\"text\":\"前端\",\"link\":\"/02.前端技术栈/JavaScript\"},{\"text\":\"工具|运维\",\"link\":\"/03.工具-部署/Linux运维笔记\"},{\"text\":\"设计模式\",\"link\":\"/06.设计模式/0-简介\"},{\"text\":\"方法论\",\"items\":[{\"text\":\"代码规范\",\"link\":\"/04.方法论/代码规范\"},{\"text\":\"开发流程\",\"link\":\"/04.方法论/开发流程\"},{\"text\":\"开发注意事项\",\"link\":\"/04.方法论/开发注意事项\"}]},{\"text\":\"架构\",\"items\":[{\"text\":\"常用技术点\",\"link\":\"/05.架构/常用技术点/JWT\"},{\"text\":\"架构900讲\",\"link\":\"/05.架构/架构900讲/场景\"},{\"text\":\"代码三千问\",\"link\":\"/05.架构/代码三千问\"},{\"text\":\"后台管理脚手架\",\"link\":\"/05.架构/后台管理系统脚手架\"},{\"text\":\"RuoYi-Cloud-Plus改良\",\"link\":\"/05.架构/RuoYi-Cloud-Plus脚手架改良\"},{\"text\":\"阿里巴巴JAVA开发手册解读\",\"link\":\"/05.架构/阿里巴巴JAVA开发手册解读/06工程结构\"}]},{\"text\":\"代码人生\",\"link\":\"/09.代码人生/常见知识点\"}],\"sidebar\":{\"/01.后端技术栈/\":[{\"text\":\"JAVA\",\"items\":[{\"text\":\"JAVA基础One\",\"link\":\"/01.后端技术栈/JAVA基础.md\"},{\"text\":\"JAVA基础Two\",\"link\":\"/01.后端技术栈/JAVA基础2\"},{\"text\":\"网络IO\",\"link\":\"/01.后端技术栈/网络IO\"},{\"text\":\"多线程\",\"items\":[{\"text\":\"JAVA并发-理论基础\",\"link\":\"/01.后端技术栈/多线程/JAVA并发-理论基础\"},{\"text\":\"关键字：synchronized\",\"link\":\"/01.后端技术栈/多线程/关键字synchronized\"},{\"text\":\"关键字：volatile\",\"link\":\"/01.后端技术栈/多线程/关键字volatile\"},{\"text\":\"关键字：final\",\"link\":\"/01.后端技术栈/多线程/关键字final\"},{\"text\":\"JUC集合-BlockingQueue\",\"link\":\"/01.后端技术栈/多线程/JUC集合-BlockingQueue\"},{\"text\":\"JUC线程池-CompletableFuture\",\"link\":\"/01.后端技术栈/多线程/JUC线程池-CompletableFuture\"},{\"text\":\"JUC线程池-ThreadPoolExecutor\",\"link\":\"/01.后端技术栈/多线程/JUC线程池-ThreadPoolExecutor\"},{\"text\":\"JAVA并发-ThreadLocal\",\"link\":\"/01.后端技术栈/多线程/JAVA并发-ThreadLocal\"}]}]}],\"/02.Spring/\":[{\"text\":\"Spring全家桶\",\"items\":[{\"text\":\"Spring\",\"items\":[{\"text\":\"@Transactional事务失效的场景\",\"link\":\"/02.Spring/Spring-@Transactional事务失效的场景\"}]},{\"text\":\"SpringBoot\",\"link\":\"/02.Spring/SpringBoot\"}]}],\"/03.数据库/\":[{\"text\":\"\",\"items\":[{\"text\":\"MySQL\",\"items\":[{\"text\":\"索引\",\"link\":\"/03.数据库/MySQL/MySql-索引.md\"},{\"text\":\"事务\",\"link\":\"/03.数据库/MySQL/MySql-事务\"},{\"text\":\"SQL优化\",\"link\":\"/03.数据库/MySQL/MySql-SQL优化\"},{\"text\":\"主从复制的原理\",\"link\":\"/03.数据库/MySQL/MySql-主从复制的原理\"},{\"text\":\"主从复制数据一致性\",\"link\":\"/03.数据库/MySQL/MySql-主从复制数据一致性\"},{\"text\":\"分库分表全局ID\",\"link\":\"/03.数据库/MySQL/MySql-全局ID\"},{\"text\":\"深度分页limit\",\"link\":\"/03.数据库/MySQL/MySql-深度分页\"},{\"text\":\"大厂实践:美团MySQL索引原理及慢查询优化\",\"link\":\"/03.数据库/MySQL/MySql-大厂实践-美团MySQL索引原理及慢查询优化\"},{\"text\":\"大厂实践:美团SQL优化工具SQLAdvisor开源\",\"link\":\"/03.数据库/MySQL/MySql-大厂实践-美团SQL优化工具SQLAdvisor开源\"}]},{\"text\":\"Redis\",\"items\":[{\"text\":\"概念和基础\",\"link\":\"/03.数据库/Redis/概念和基础\"},{\"text\":\"数据结构-对象机制\",\"link\":\"/03.数据库/Redis/数据结构-对象机制\"},{\"text\":\"数据结构-底层数据结构\",\"link\":\"/03.数据库/Redis/数据结构-底层数据结构\"},{\"text\":\"数据结构-对象与编码(底层结构)\",\"link\":\"/03.数据库/Redis/数据结构-对象与编码(底层结构)\"},{\"text\":\"持久化RDB和AOF\",\"link\":\"/03.数据库/Redis/持久化RDB和AOP\"},{\"text\":\"高可用-主从复制\",\"link\":\"/03.数据库/Redis/高可用-主从复制\"},{\"text\":\"高可用-哨兵机制\",\"link\":\"/03.数据库/Redis/高可用-哨兵机制\"},{\"text\":\"性能调优\",\"link\":\"/03.数据库/Redis/性能调优\"},{\"text\":\"Redis相关问题\",\"link\":\"/03.数据库/Redis/Redis\"},{\"text\":\"场景及解决方案\",\"link\":\"/03.数据库/Redis/场景及解决方案\"}]},{\"text\":\"MySQL和Redis数据一致性\",\"link\":\"/03.数据库/Mysql和Redis数据一致性\"}]}],\"/04.中间件/\":[{\"text\":\"\",\"items\":[{\"text\":\"Kafka\",\"link\":\"/04.中间件/Kafka.md\"},{\"text\":\"Zookeeper\",\"link\":\"/04.中间件/Zookeeper.md\"},{\"text\":\"Netty\",\"link\":\"/04.中间件/Netty.md\"}]}],\"/02.算法/\":[{\"text\":\"算法基础和思想\",\"items\":[{\"text\":\"数据结构基础\",\"items\":[{\"text\":\"概述\",\"link\":\"/02.算法/算法基础和思想/数据结构基础/数据结构基础概述\"},{\"text\":\"线性表-数组和矩阵\",\"link\":\"/02.算法/算法基础和思想/数据结构基础/线性表-数组和矩阵\"},{\"text\":\"线性表-链表\",\"link\":\"/02.算法/算法基础和思想/数据结构基础/线性表-链表\"}]}]}],\"/06.设计模式/\":[{\"text\":\"\",\"items\":[{\"text\":\"0-简介\",\"link\":\"/06.设计模式/0-简介\"},{\"text\":\"1-单例模式\",\"link\":\"/06.设计模式/1-单例模式\"},{\"text\":\"2-工厂方法模式\",\"link\":\"/06.设计模式/2-工厂方法模式\"},{\"text\":\"3-抽象工厂模式\",\"link\":\"/06.设计模式/3-抽象工厂模式\"},{\"text\":\"4-建造者模式\",\"link\":\"/06.设计模式/4-建造者模式\"},{\"text\":\"5-原型模式\",\"link\":\"/06.设计模式/5-原型模式\"},{\"text\":\"6-适配器模式\",\"link\":\"/06.设计模式/6-适配器模式\"},{\"text\":\"7-代理模式\",\"link\":\"/06.设计模式/7-代理模式\"},{\"text\":\"8-装饰模式\",\"link\":\"/06.设计模式/8-装饰模式\"},{\"text\":\"*9-外观模式\",\"link\":\"/06.设计模式/9-外观模式\"},{\"text\":\"10-桥接模式\",\"link\":\"/06.设计模式/10-桥接模式\"},{\"text\":\"11-组合模式\",\"link\":\"/06.设计模式/11-组合模式\"},{\"text\":\"12-享元模式\",\"link\":\"/06.设计模式/12-享元模式\"},{\"text\":\"*13-观察者模式\",\"link\":\"/06.设计模式/13-观察者模式\"},{\"text\":\"*14-策略模式\",\"link\":\"/06.设计模式/14-策略模式\"},{\"text\":\"15-命令模式\",\"link\":\"/06.设计模式/15-命令模式\"},{\"text\":\"16-中介者模式\",\"link\":\"/06.设计模式/16-中介者模式\"},{\"text\":\"17-备忘录模式\",\"link\":\"/06.设计模式/17-备忘录模式\"},{\"text\":\"18-模板方法模式\",\"link\":\"/06.设计模式/18-模板方法模式\"},{\"text\":\"19-迭代器模式\",\"link\":\"/06.设计模式/19-迭代器模式\"},{\"text\":\"20-状态模式\",\"link\":\"/06.设计模式/20-状态模式\"},{\"text\":\"*21-责任链模式\",\"link\":\"/06.设计模式/21-责任链模式\"},{\"text\":\"22-解释器模式\",\"link\":\"/06.设计模式/22-解释器模式\"},{\"text\":\"23-访问者模式\",\"link\":\"/06.设计模式/23-访问者模式\"}]}],\"/02.前端技术栈/\":[{\"text\":\"\",\"items\":[{\"text\":\"JavaScript\",\"link\":\"/02.前端技术栈/JavaScript\"}]}],\"/03.工具-部署/\":[{\"text\":\"\",\"items\":[{\"text\":\"常见单词\",\"link\":\"/03.工具-部署/常见单词\"},{\"text\":\"收藏目录\",\"link\":\"/03.工具-部署/收藏目录\"},{\"text\":\"Docker\",\"link\":\"/03.工具-部署/Docker\"},{\"text\":\"Git\",\"link\":\"/03.工具-部署/Git\"},{\"text\":\"Idea使用技巧\",\"link\":\"/03.工具-部署/Idea使用技巧\"},{\"text\":\"linux运维笔记\",\"link\":\"/03.工具-部署/Linux运维笔记\"}]}],\"/04.方法论/\":[{\"text\":\"代码规范\",\"link\":\"/04.方法论/代码规范\"},{\"text\":\"开发流程\",\"link\":\"/04.方法论/开发流程\"},{\"text\":\"开发注意事项\",\"link\":\"/04.方法论/开发注意事项\"}],\"/05.架构/\":[{\"text\":\"\",\"items\":[{\"text\":\"常用技术点\",\"items\":[{\"text\":\"JWT\",\"link\":\"/05.架构/常用技术点/JWT\"},{\"text\":\"数据库读写分离\",\"link\":\"/05.架构/常用技术点/数据库读写分离\"}]},{\"text\":\"架构900讲\",\"items\":[{\"text\":\"场景\",\"link\":\"/05.架构/架构900讲/场景\"},{\"text\":\"数据库-Redis\",\"link\":\"/05.架构/架构900讲/数据库-Redis\"},{\"text\":\"数据库-MySQL\",\"link\":\"/05.架构/架构900讲/数据库-MySQL\"},{\"text\":\"MQ\",\"link\":\"/05.架构/架构900讲/MQ\"},{\"text\":\"运维\",\"link\":\"/05.架构/架构900讲/运维\"}]},{\"text\":\"代码三千问\",\"link\":\"/05.架构/代码三千问\"},{\"text\":\"脚手架集合\",\"items\":[{\"text\":\"后台管理脚手架\",\"link\":\"/05.架构/后台管理系统脚手架\"},{\"text\":\"RuoYi-Cloud-Plus改良\",\"link\":\"/05.架构/RuoYi-Cloud-Plus脚手架改良\"}]},{\"text\":\"阿里巴巴JAVA开发手册解读\",\"items\":[{\"text\":\"01编码规约\",\"link\":\"/05.架构/阿里巴巴JAVA开发手册解读/01编码规约\"},{\"text\":\"06工程结构\",\"link\":\"/05.架构/阿里巴巴JAVA开发手册解读/06工程结构\"}]}]}],\"/09.代码人生/\":[{\"text\":\" \",\"items\":[{\"text\":\"常见知识点\",\"link\":\"/09.代码人生/常见知识点\"},{\"text\":\"生活小技巧\",\"link\":\"/09.代码人生/生活小技巧\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":{\"text\":\"最后更新\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"short\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>